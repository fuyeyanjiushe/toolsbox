<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥¶èŒ¶çƒ­é‡è®¡ç®—å™¨</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap');
    .title-font { font-family: 'ZCOOL KuaiLe', sans-serif; }
    .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .selected { transform: scale(1.05); border-color: #fb7185 !important; }
    .calorie-bar { transition: width 1s ease-in-out; }
  </style>
</head>
<body class="bg-gradient-to-br from-pink-50 to-blue-50 min-h-screen">
  <div id="app" class="container mx-auto px-4 py-8">
    <!-- æ ‡é¢˜åŒº -->
    <h1 class="title-font text-4xl text-center mb-8 text-pink-600">å¥¶èŒ¶çƒ­é‡è®¡ç®—å™¨</h1>

    <!-- åŠŸèƒ½å¡ç‰‡åŒº -->
    <div class="max-w-md mx-auto space-y-6 min-h-screen pb-40">
      <!-- æ¸©åº¦é€‰æ‹© -->
      <div class="card bg-white rounded-2xl p-6 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ğŸŒ¡ï¸ é€‰æ‹©æ¸©åº¦</h2>
        <div class="flex gap-3 justify-center">
          <button 
            v-for="(temp, index) in temperatureOptions"
            :key="index"
            @click="selectedTemp = index"
            :class="['px-6 py-3 rounded-xl border-2 cursor-pointer text-center',
                    { 'selected': selectedTemp === index }]"
          >
            {{ temp.label }}
          </button>
        </div>
      </div>

      <!-- å®¹é‡é€‰æ‹© -->
      <div class="card bg-white rounded-2xl p-6 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ğŸ¥¤ é€‰æ‹©å®¹é‡</h2>
        <div class="grid grid-cols-2 gap-3">
          <div 
            v-for="(size, index) in sizeOptions"
            :key="index"
            @click="selectedSize = index"
            :class="['p-3 rounded-xl border-2 cursor-pointer text-center',
                    { 'selected': selectedSize === index }]"
          >
            <div class="text-lg mb-1">{{ size.icon }}</div>
            <p class="font-medium text-sm">{{ size.label }}</p>
          </div>
        </div>
      </div>

      <!-- å¥¶èŒ¶ç±»å‹é€‰æ‹© -->
      <div class="card bg-white rounded-2xl p-6 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ğŸµ é€‰æ‹©å¥¶èŒ¶ç±»å‹</h2>
        <div class="grid grid-cols-2 gap-3">
          <div v-for="(type, index) in teaTypes" :key="index"
               @click="selectTeaType(index)"
               :class="['p-3 rounded-xl border-2 cursor-pointer flex items-center',
                       { 'selected': selectedTeaType === index }]">
            <span class="text-2xl mr-2">{{ type.icon }}</span>
            <div>
              <p class="font-medium">{{ type.name }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ç³–åˆ†é€‰æ‹© -->
      <div class="card bg-white rounded-2xl p-6 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ğŸ¯ ç³–åˆ†ç­‰çº§</h2>
        <div class="flex justify-between items-center">
          <div v-for="(sugar, index) in sugarLevels" :key="index"
               @click="selectedSugar = index"
               :class="['w-1/5 text-center p-3 rounded-xl border-2 cursor-pointer',
                       { 'bg-pink-100': selectedSugar === index }]">
            <div class="text-2xl mb-1">{{ sugar.icon }}</div>
            <span class="text-sm">{{ sugar.label }}</span>
          </div>
        </div>
      </div>

      <!-- å°æ–™é€‰æ‹© -->
      <div class="card bg-white rounded-2xl p-6 shadow-lg">
        <h2 class="text-xl font-semibold mb-4">ğŸ¡ æ·»åŠ å°æ–™</h2>
        <div class="grid grid-cols-3 gap-3">
          <div v-for="(topping, index) in toppings" :key="index"
               @click="toggleTopping(index)"
               :class="['p-3 rounded-xl border-2 cursor-pointer text-center',
                       { 'bg-pink-100 border-pink-300': selectedToppings.includes(index) }]">
            <div class="text-2xl mb-1">{{ topping.icon }}</div>
            <p class="text-sm">{{ topping.name }}</p>
          </div>
        </div>
      </div>

    </div>

    <!-- çƒ­é‡æ˜¾ç¤ºåŒº -->
    <div class="fixed bottom-0 left-0 right-0 bg-white p-6 shadow-lg">
      <div class="max-w-md mx-auto">
        <div class="flex justify-between items-center mb-3">
          <h3 class="text-lg font-semibold">ğŸ”¥ æ€»çƒ­é‡</h3>
          <span :class="['text-2xl font-bold', { 'text-orange-500': totalCalories > 500 }]">
            {{ totalCalories }} kcal
          </span>
        </div>
        <div class="bg-gray-200 rounded-full h-3">
          <div :class="['calorie-bar bg-pink-400 h-3 rounded-full', 
                      { 'bg-orange-400': totalCalories > 500 }]"
               :style="{ width: caloriePercentage + '%' }"></div>
        </div>
        <p class="text-sm text-gray-600 mt-2">
          {{ calorieComment }}
        </p>
      </div>
    </div>
  </div>

  <script>
    const { createApp } = Vue

    createApp({
      data() {
        return {
          selectedTeaType: 0,
          selectedSugar: 2,
          selectedToppings: [],
          selectedTemp: 0,
          selectedSize: 0,
          temperatureOptions: [
            { label: 'ğŸ§Š å†·é¥®', multiplier: 0.9 },
            { label: 'ğŸ”¥ çƒ­é¥®', multiplier: 1.1 }
          ],
          sizeOptions: [
            { icon: 'ğŸ¥¤', label: 'ä¸­æ¯', multiplier: 1 },
            { icon: 'ğŸ«™', label: 'å¤§æ¯', multiplier: 1.3 }
          ],
          teaTypes: [
            { icon: 'ğŸ¥¤', name: 'ç»å…¸å¥¶èŒ¶', calories: 300 },
            { icon: 'ğŸ¹', name: 'æ°´æœèŒ¶', calories: 200 },
            { icon: 'ğŸ§‹', name: 'èŠå£«èŒ¶', calories: 350 },
            { icon: 'ğŸ¥¥', name: 'æ¤°å¥¶ç±»', calories: 250 },
            { icon: 'ğŸŒ¾', name: 'ç‡•éº¦å¥¶èŒ¶', calories: 280 },
            { icon: 'ğŸµ', name: 'æŠ¹èŒ¶æ‹¿é“', calories: 320 },
            { icon: 'ğŸ¥­', name: 'æ¨æç”˜éœ²', calories: 280 }
          ],
          sugarLevels: [
            { icon: 'ğŸš«', label: 'æ— ç³–', multiplier: 0 },
            { icon: 'ğŸ¬', label: 'å¾®ç³–', multiplier: 0.25 },
            { icon: 'ğŸ¥„', label: 'åŠç³–', multiplier: 0.45 },
            { icon: 'ğŸ«™', label: 'å…¨ç³–', multiplier: 0.8 },
            { icon: 'âš ï¸', label: 'åŠ å€ç³–', multiplier: 1.2 }
          ],
          toppings: [
            { icon: 'âš«', name: 'çç ', calories: 120 },
            { icon: 'âšª', name: 'æ¤°æœ', calories: 60 },
            { icon: 'ğŸŸ£', name: 'èŠ‹åœ†', calories: 100 },
            { icon: 'ğŸŸ¡', name: 'å¸ƒä¸', calories: 80 },
            { icon: 'ğŸ¤', name: 'å¥¶ç›–', calories: 150 },
            { icon: 'â¤ï¸', name: 'çº¢è±†', calories: 90 },
            { icon: 'ğŸŒ€', name: 'å¯’å¤©', calories: 40 },
            { icon: 'ğŸ®', name: 'ä»™è‰', calories: 30 }
          ]
        }
      },
      computed: {
        baseCalories() {
          return this.teaTypes[this.selectedTeaType].calories
        },
        sugarCalories() {
          return this.baseCalories * this.sugarLevels[this.selectedSugar].multiplier
        },
        toppingsCalories() {
          return this.selectedToppings.reduce((sum, index) => 
            sum + this.toppings[index].calories, 0)
        },
        tempMultiplier() {
          return this.temperatureOptions[this.selectedTemp]?.multiplier || 1
        },
        sizeMultiplier() {
          return this.sizeOptions[this.selectedSize]?.multiplier || 1
        },
        totalCalories() {
          return Math.round(
            ((this.baseCalories * this.tempMultiplier) + 
             this.sugarCalories + 
             this.toppingsCalories) * this.sizeMultiplier
          )
        },
        caloriePercentage() {
          return Math.min(Math.round((this.totalCalories / 2000) * 100), 100)
        },
        calorieComment() {
          if (this.totalCalories < 300) return 'è¿™æ¯è¶…ä½å¡ï¼æ”¾å¿ƒäº«ç”¨ï½'
          if (this.totalCalories < 500) return 'çƒ­é‡å¯æ§ï¼ŒåŠ æ–™è‡ªç”±ï¼'
          return 'æ³¨æ„æ§åˆ¶çƒ­é‡æ‘„å…¥å“¦ï¼'
        }
      },
      mounted() {
        this.initChart();
      },
      methods: {
        selectTeaType(index) {
          this.selectedTeaType = index
        },
        toggleTopping(index) {
          const position = this.selectedToppings.indexOf(index)
          if (position > -1) {
            this.selectedToppings.splice(position, 1)
          } else {
            this.selectedToppings.push(index)
          }
        },
        initChart() {
          this.chart = new Chart(document.getElementById('nutritionChart'), {
            type: 'doughnut',
            data: {
              labels: ['åŸºç¡€çƒ­é‡', 'ç³–åˆ†', 'å°æ–™'],
              datasets: [{
                data: [
                  this.baseCalories * this.tempMultiplier,
                  this.sugarCalories,
                  this.toppingsCalories
                ],
                backgroundColor: ['#fb7185','#fbbf24','#a3e635']
              }]
            }
          });
        }
      },
      watch: {
        totalCalories() {
          if (this.chart) {
            this.chart.data.datasets[0].data = [
              this.baseCalories * this.tempMultiplier,
              this.sugarCalories,
              this.toppingsCalories
            ];
            this.chart.update();
          }
        }
      }
    }).mount('#app')
  </script>
</body>
</html>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f5f5f5;
      min-height: 100vh;
      overflow-y: auto;
      padding-bottom: 10rem;
    }